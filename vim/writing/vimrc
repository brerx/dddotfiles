" Enable TOC window auto-fit
let g:vim_markdown_toc_autofit = 1
let g:vim_markdown_folding_disabled = 1

function! s:SpellCheck(bang, lang = "en")
  let prefix = ""
  if a:bang
    let prefix = "no" 
  endif
  execute "setlocal " . prefix . "spell spelllang=" . a:lang
endfunction

command! -nargs=? -bang SpellCheck :call <SID>SpellCheck(<bang>0, <f-args>)

function! s:ToggleWrite(bang, width)
  if a:bang
    Goyo! | Limelight!
    set nowrap nolinebreak
    colorscheme codedark
    hi Normal ctermbg=NONE
    hi EndOfBuffer ctermbg=NONE
    hi LineNr ctermbg=NONE
    hi SignColumn ctermbg=NONE
  else
    set wrap linebreak
    colorscheme seoul256
    execute "Goyo " . a:width . " | Limelight"
  endif
endfunction

command! -nargs=* -bang Write :call <SID>ToggleWrite(<bang>0, <q-args>)

" TODO: Introduce setup for ~/.vim/after/ftplugin/<filetype>.vim and move it
" there
augroup filetype_tex
    autocmd!
    autocmd BufNew,BufRead *.tex setlocal conceallevel=0
augroup END
